import { browser } from '$app/environment';
import { writable } from 'svelte/store';

class Link {
	title: string;
	href: string;

	constructor(title: string, href: string) {
		this.title = title;
		this.href = href;
	}
}



// if browser is not available, set initialValue to an empty array
let initialValue: { title: string; href: string }[] = browser
	? JSON.parse(localStorage.getItem('links') || '[]').map(
			(link: { title: string; href: string }) => new Link(link.title, link.href)
		)
	: [];

console.log(initialValue);

const links = writable<Link[]>(initialValue);

links.subscribe((updatedValue) => {
	if (browser) {
		localStorage.setItem('links', JSON.stringify(updatedValue));
	}
});

export { Link, links };
